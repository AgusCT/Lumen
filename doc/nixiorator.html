<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Nixiorator: a nixio-binding task for Lumen</title>
<meta name="author" content="Jorge Visca">
<meta name="description" content="Nixiorator: a nixio-binding task for Lumen">
</head>
<body>


<h1>Nixiorator: a nixio-binding task for Lumen</h1>
<p>Nixiorator is a library providing a Lumen task that interfaces with nixio and 
generates Lumen signals. This allows for Lumen applications to integrate nixio. 
Supports TCP and UDP socket, and filehandles.</p>
<p>To use the library, do</p>
	<pre>local nixiorator = require("nixiorator")</pre>

<hr>
<h2><a name="nixiorator.register_server">nixiorator.register_server(fd, [pattern])</a></h2>
	<p>Registers a TCP server socket with nixiorator.</p>
	<b>Parameters</b>
		<ul><li>fd: a TCP server socket</li>
		<li>pattern: The read pattern to be used for established connections 
			 (see <em><a href="#nixiorator.register_client">nixiorator.register_client()</a></em>).</li></ul>
	<b>Signals</b>
		<ul><li><em>fd, 'accepted', client</em> when establishing a connection, where fd is 
				the server socket and client is the new client socket. The client socket is 
				automatically registered into nixiorator.</li></ul>

<hr>
<h2><a name="nixiorator.register_client">nixiorator.register_client(fd, [pattern])</a></h2>
	<p>Registers a client socket (TCP, UDP, or filehandle) with nixiorator.</p>
	<b>Parameters</b>
		<ul><li>fd: a client socket or filehandle</li>
		<li>pattern: The read pattern to be used.
		<ul><li><em>'line'</em> will provide data trough nixio's linesource iterator.</li>
		<li><em>number</em> will provide data trough nixio's block iterator.</li>
		</ul></li></ul>
	<b>Signals</b>
		<ul><li><em>fd, data, error</em> On data read.</li></ul>


<hr>
<h2><a name="nixiorator.wait">nixiorator.unregister(fd)</a></h2>
	<p>Unregisters a socket with nixiorator.</p>
	<strong>Parameters</strong>
		<ul><li>fd: the socket or filehandle to unregister.</li></ul>

<hr>
<h2>nixiorator.step(timeout)</h2>
	<p>Performs a single step for the nixiorator. Will block at the OS level for up to
	timeout seconds. Usually this method is not used (see <em><a href="#nixiorator.task">nixiorator.task</a></em>)</p>
	<strong>Parameters</strong>
		<ul><li>timeout: Max allowed blocking time.</li></ul>
	<b>Signals</b>
		<ul><li>The ones triggered by registered sockets (see <em>
		<a href="#nixiorator.register_server">nixiorator.register_server()</a></em> 
		and <em><a href="#nixiorator.register_client">nixiorator.register_client()</a></em>).</li></ul>

<hr>
<h2>nixiorator.idle</h2>
	<p>If nixio provides the <em>nanosleep</em> function (see github xopxe/nixio), then will be
	a function useful for replacing Lumen's <em>sleep</em>.</p>

<hr>
<h2>nixiorator.nixio</h2>
	<p>A reference to the nixio library.</p>

<hr>
<h2><a name="#nixiorator.task">nixiorator.task</a></h2>
	<p>The function to be registered with the Lumen scheduler to receive the nixiorator 
	task. Usually used like this:</p>
	<pre>local sched = require "sched"
local nixiorator = require "nixiorator"
local n = sched.run(nixiorator.task)</pre>

	<b>Signals</b>
		<ul><li>The ones triggered by registered sockets (see <em>
		<a href="#nixiorator.register_server">nixiorator.register_server()</a></em> 
		and <em><a href="#nixiorator.register_client">nixiorator.register_client()</a></em>).
		</li></ul>

<br><br>
<hr>
<div align="right">(c) 2012 - Jorge Visca, jvisca@fing.edu.uy</div>

</body>
</html>